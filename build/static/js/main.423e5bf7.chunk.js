(this.webpackJsonpoais=this.webpackJsonpoais||[]).push([[0],{283:function(e,t){},408:function(e,t,n){},409:function(e,t,n){},462:function(e,t){},463:function(e,t){},864:function(e,t){},866:function(e,t){},953:function(e,t,n){"use strict";n.r(t);var r=n(14),a=n.n(r),c=n(398),s=n.n(c),i=(n(408),n(94)),o=(n(409),n(30)),u=n(23),l=n.n(u),p=n(44),j=(n(218).JSDOM,n(927),"/api/users");function h(e){return d(j,"POST",e)}function b(e){return d("".concat(j,"/login"),"POST",e)}function d(e){return O.apply(this,arguments)}function O(){return(O=Object(p.a)(l.a.mark((function e(t){var n,r,a,c,s,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:"GET",r=i.length>2&&void 0!==i[2]?i[2]:null,a={method:n},r&&(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(r)),(c=x())&&(a.headers=a.headers||{},a.headers.Authorization="Bearer ".concat(c)),e.next=8,fetch(t,a);case 8:if(!(s=e.sent).ok){e.next=11;break}return e.abrupt("return",s.json());case 11:throw new Error("Bad Request");case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return m.apply(this,arguments)}function m(){return(m=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h(t);case 3:return n=e.sent,localStorage.setItem("token",n),e.abrupt("return",v());case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Invalid Sign Up");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function x(){var e=localStorage.getItem("token");return e?JSON.parse(atob(e.split(".")[1])).exp<Date.now()/1e3?(localStorage.removeItem("token"),null):e:null}function v(){var e=x();return e?JSON.parse(atob(e.split(".")[1])).user:null}function g(e){return w.apply(this,arguments)}function w(){return(w=Object(p.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b(t);case 3:return n=e.sent,localStorage.setItem("token",n),e.abrupt("return",v());case 8:throw e.prev=8,e.t0=e.catch(0),new Error("Invalid Sign Up");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function y(){return d("".concat(j,"/check-token")).then((function(e){return new Date(e)}))}var S=n(111),k=n(80),C=n(399),P=n(400),N=n(403),U=n(402),I=n(13),E=function(e){Object(N.a)(n,e);var t=Object(U.a)(n);function n(){var e;Object(C.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={name:"",email:"",password:"",confirm:"",error:""},e.handleChange=function(t){var n;e.setState((n={},Object(k.a)(n,t.target.name,t.target.value),Object(k.a)(n,"error",""),n))},e.handleSubmit=function(){var t=Object(p.a)(l.a.mark((function t(n){var r,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,delete(r=Object(S.a)({},e.state)).error,delete r.confirm,t.next=7,f(r);case 7:a=t.sent,e.props.setUser(a),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.setState({error:"Sign Up Failed - Try Again"});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(P.a)(n,[{key:"render",value:function(){var e=this.state.password!==this.state.confirm;return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"form-container",children:Object(I.jsxs)("form",{autoComplete:"off",onSubmit:this.handleSubmit,children:[Object(I.jsx)("label",{children:"Name"}),Object(I.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:this.handleChange,required:!0}),Object(I.jsx)("label",{children:"Email"}),Object(I.jsx)("input",{type:"email",name:"email",value:this.state.email,onChange:this.handleChange,required:!0}),Object(I.jsx)("label",{children:"Password"}),Object(I.jsx)("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,required:!0}),Object(I.jsx)("label",{children:"Confirm"}),Object(I.jsx)("input",{type:"password",name:"confirm",value:this.state.confirm,onChange:this.handleChange,required:!0}),Object(I.jsx)("button",{type:"submit",disabled:e,children:"SIGN UP"})]})}),Object(I.jsxs)("p",{className:"error-message",children:["\xa0",this.state.error]})]})}}]),n}(r.Component);function F(e){var t=e.setUser;return Object(I.jsx)("main",{className:"AuthPage",children:Object(I.jsx)(E,{setUser:t})})}function T(e){var t=Object(r.useState)({email:"",password:""}),n=Object(i.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)(""),o=Object(i.a)(s,2),u=o[0],j=o[1];function h(e){c(Object(S.a)(Object(S.a)({},a),{},Object(k.a)({},e.target.name,e.target.value))),j("")}function b(){return(b=Object(p.a)(l.a.mark((function t(n){var r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.prev=1,t.next=4,g(a);case 4:r=t.sent,e.setUser(r),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),j("Log In Failed - Try Again");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})))).apply(this,arguments)}return Object(I.jsxs)("div",{children:[Object(I.jsx)("div",{className:"form-container",onSubmit:function(e){return b.apply(this,arguments)},children:Object(I.jsxs)("form",{autoComplete:"off",children:[Object(I.jsx)("label",{children:"Email"}),Object(I.jsx)("input",{type:"text",name:"email",value:a.email,onChange:h,required:!0}),Object(I.jsx)("label",{children:"Password"}),Object(I.jsx)("input",{type:"password",name:"password",value:a.password,onChange:h,required:!0}),Object(I.jsx)("button",{type:"submit",children:"LOG IN"})]})}),Object(I.jsxs)("p",{className:"error-message",children:["\xa0",u]})]})}function q(){return Object(I.jsx)("main",{className:"NewPuppyPage",children:Object(I.jsx)("h1",{children:"NewPuppyPage"})})}function L(){function e(){return(e=Object(p.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(I.jsxs)("main",{className:"PuppyHistoryPage",children:[Object(I.jsx)("h1",{children:"PuppyHistoryPage"}),Object(I.jsx)("button",{onClick:function(){return e.apply(this,arguments)},children:"Check When My Login Expires"})]})}var A=n(81);function D(e){var t=e.user,n=e.setUser;return Object(I.jsxs)("nav",{children:[Object(I.jsx)(A.b,{to:"/puppies",children:"Puppy History"}),"\xa0 | \xa0",Object(I.jsx)(A.b,{to:"/puppies/new",children:"New Puppy"}),"\xa0 | \xa0 Welcome, ",t.name,"\xa0\xa0",Object(I.jsx)(A.b,{to:"",onClick:function(){localStorage.removeItem("token"),n(null)},children:"Log Out"})]})}function J(){var e=Object(r.useState)(v()),t=Object(i.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(!0),s=Object(i.a)(c,2),u=s[0],l=s[1];return Object(I.jsx)("main",{className:"App",children:n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(D,{user:n,setUser:a}),Object(I.jsxs)(o.d,{children:[Object(I.jsx)(o.b,{path:"/puppies/new",children:Object(I.jsx)(q,{})}),Object(I.jsx)(o.b,{path:"/puppies",children:Object(I.jsx)(L,{})}),Object(I.jsx)(o.b,{children:Object(I.jsx)(o.a,{to:"/puppies"})})]})]}):Object(I.jsxs)(I.Fragment,{children:[Object(I.jsxs)("button",{onClick:function(){return l(!u)},children:[" ",u?"Login":"Sign Up"," "]}),u&&Object(I.jsx)(F,{setUser:a}),u||Object(I.jsx)(T,{setUser:a})]})})}var B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,954)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};s.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(A.a,{children:Object(I.jsx)(J,{})})}),document.getElementById("root")),B()}},[[953,1,2]]]);
//# sourceMappingURL=main.423e5bf7.chunk.js.map